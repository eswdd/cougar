<!--
  ~ Copyright 2013, The Sporting Exchange Limited
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>uk.co.exemel.disco</groupId>
		<artifactId>baseline</artifactId>
		<version>3.3-SNAPSHOT</version>
	</parent>
	<artifactId>baseline-launch</artifactId>
	<packaging>jar</packaging>

	<name>baseline-launcher</name>
	<build>
		<pluginManagement>
			<plugins>
				<plugin>
					<groupId>org.apache.maven.plugins</groupId>
					<artifactId>maven-assembly-plugin</artifactId>
					<version>2.2-beta-3</version>
				</plugin>
			</plugins>
		</pluginManagement>

		<plugins>
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>exec-maven-plugin</artifactId>
				<version>1.1.1</version>
				<configuration>
					<mainClass>uk.co.exemel.disco.core.impl.Main</mainClass>
					<classpathScope>runtime</classpathScope>
                    <systemProperties>
                        <systemProperty>
                            <key>user.timezone</key>
                            <value>UTC</value>
                        </systemProperty>
                        <systemProperty>
                            <key>system.timezone</key>
                            <value>UTC</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.log.CONSOLE.level</key>
                            <value>INFO</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.log.echoToStdout</key>
                            <value>true</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.maxmind.useDefault</key>
                            <value>true</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.fault.detailed</key>
                            <value>true</value>
                        </systemProperty>
                        <systemProperty>
                            <key>jmx.html.keystore.filepath</key>
                            <value>classpath:disco_server_cert.jks</value>
                        </systemProperty>
                        <systemProperty>
                            <key>jmx.html.keystore.password</key>
                            <value>ENC(iTXZuGkVHRJoOrDQ548Ua8TZw7998U+h)</value> <!-- "password" encrypted with algorithm=PBEWithMD5AndDES and password=baseline -->
                        </systemProperty>
                        <systemProperty>
                            <key>jmx.html.keystore.certpassword</key>
                            <value>ENC(iTXZuGkVHRJoOrDQ548Ua8TZw7998U+h)</value> <!-- "password" encrypted with algorithm=PBEWithMD5AndDES and password=baseline -->
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.healthStateRepeatsBeforeUpdate</key>
                            <value>1</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.healthMonitorStrategy</key>
                            <value>active</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.healthMonitorInterval</key>
                            <value>2</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.logLevel</key>
                            <value>TRANSPORT</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.client.socket.logLevel</key>
                            <value>TRANSPORT</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.client.socket.clientExecutor.processorThreads</key>
                            <value>2</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.log.SESSION-LOG.format</key>
                            <value>%d{HH:mm:ss.SSS}: %t %m%n</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.client.socket.ssl.supportsTls</key>
                            <value>false</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.client.socket.ssl.requiresTls</key>
                            <value>false</value>
                        </systemProperty>
                        <!-- override default so we can test insecure clients -->
                        <systemProperty>
                            <key>disco.socket.ssl.requiresTls</key>
                            <value>false</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.ssl.supportsTls</key>
                            <value>true</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.ssl.wantClientAuth</key>
                            <value>true</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.ssl.keystore</key>
                            <value>classpath:disco_server_cert.jks</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.ssl.keystorePassword</key>
                            <value>ENC(iTXZuGkVHRJoOrDQ548Ua8TZw7998U+h)</value> <!-- "password" encrypted with algorithm=PBEWithMD5AndDES and password=baseline -->
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.ssl.truststore</key>
                            <value>classpath:disco_client_ca.jks</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.socket.ssl.truststorePassword</key>
                            <value>ENC(iTXZuGkVHRJoOrDQ548Ua8TZw7998U+h)</value> <!-- "password" encrypted with algorithm=PBEWithMD5AndDES and password=baseline -->
                        </systemProperty>
                        <systemProperty>
                            <key>jetty.https.port</key>
                            <value>8443</value>
                        </systemProperty>
                        <systemProperty>
                            <key>jetty.https.wantClientAuth</key>
                            <value>true</value>
                        </systemProperty>
                        <systemProperty>
                            <key>jetty.https.certAlias</key>
                            <value>selfsigned</value>
                        </systemProperty>
                        <systemProperty>
                            <key>jetty.https.keystore</key>
                            <value>classpath:disco_server_cert.jks</value>
                        </systemProperty>
                        <systemProperty>
                            <key>jetty.https.keyPassword</key>
                            <value>ENC(iTXZuGkVHRJoOrDQ548Ua8TZw7998U+h)</value> <!-- "password" encrypted with algorithm=PBEWithMD5AndDES and password=baseline -->
                        </systemProperty>
                        <systemProperty>
                            <key>jetty.https.truststore</key>
                            <value>classpath:disco_client_ca.jks</value>
                        </systemProperty>
                        <systemProperty>
                            <key>jetty.https.trustPassword</key>
                            <value>ENC(iTXZuGkVHRJoOrDQ548Ua8TZw7998U+h)</value> <!-- "password" encrypted with algorithm=PBEWithMD5AndDES and password=baseline -->
                        </systemProperty>
                        <systemProperty>
                            <key>disco.app.name</key>
                            <value>disco-baseline</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.kpis.simple.enabled</key>
                            <value>true</value>
                        </systemProperty>
                        <systemProperty>
                            <key>disco.kpis.statse.enabled</key>
                            <value>true</value>
                        </systemProperty>
                        <systemProperty>
                            <key>jetty.request.timeoutInSeconds</key>
                            <value>1800</value> <!-- 30m -->
                        </systemProperty>
                        <!-- allows us to work when a machine roaming - only useful in dev/test -->
                        <systemProperty>
                            <key>disco.addressUtils.allowLoopBackIfNoOthers</key>
                            <value>true</value>
                        </systemProperty>
                        <!--<systemProperty>-->
                        <!--<key>javax.net.debug</key>-->
                        <!--<value>ssl</value>-->
                        <!--</systemProperty>-->
                    </systemProperties>
            	</configuration>
			</plugin>
			<plugin>
				<artifactId>maven-assembly-plugin</artifactId>
				<version>2.2-beta-3</version>
				<configuration>
					<descriptors>
						<descriptor>src/main/assembly/bin.xml</descriptor>
					</descriptors>
				</configuration>
			</plugin>
		</plugins>
	</build>

	<dependencies>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
			<artifactId>disco-util</artifactId>
			<scope>runtime</scope>
		</dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>net-util</artifactId>
            <scope>runtime</scope>
        </dependency>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
			<artifactId>disco-api</artifactId>
			<version>${project.version}</version>
			<scope>runtime</scope>
		</dependency>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
			<artifactId>disco-core-api</artifactId>
			<version>${project.version}</version>
			<scope>runtime</scope>
		</dependency>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
			<artifactId>disco-core-impl</artifactId>
			<scope>runtime</scope>
		</dependency>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
            <artifactId>disco-ev</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
            <artifactId>disco-null-geoip-locator</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>disco-marshalling-api</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>disco-marshalling-impl</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>disco-transport-impl</artifactId>
			<version>${project.version}</version>
			<scope>runtime</scope>
		</dependency>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
			<artifactId>disco-caching</artifactId>
			<version>${project.version}</version>
			<scope>runtime</scope>
		</dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>activemq-transport</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>jetty-transport</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>socket-transport</artifactId>
            <version>${project.version}</version>
        </dependency>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
			<artifactId>baseline-app</artifactId>
			<version>${project.version}</version>
			<scope>runtime</scope>
		</dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>baseline-oldversionservice</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
		<dependency>
			<groupId>uk.co.exemel.disco</groupId>
			<artifactId>disco-health-service-app</artifactId>
			<version>${project.version}</version>
			<scope>runtime</scope>
		</dependency>
        <dependency>
            <groupId>uk.co.exemel.disco</groupId>
            <artifactId>disco-testing-service-impl</artifactId>
            <version>${project.version}</version>
            <scope>runtime</scope>
        </dependency>
	    <dependency>
	        <groupId>com.caucho</groupId>
	        <artifactId>hessian</artifactId>
	    </dependency>
	 </dependencies>
</project>
